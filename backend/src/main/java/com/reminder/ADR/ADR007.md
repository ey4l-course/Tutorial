# ADR 007: Context Exception Resolver 

**Status:** Accepted  
**Date:** 2025-08-17

## Context

When framework exception is thrown, contextDTO.setOutcome() must be triggered and populate outcome with structured message.

## Decision

The resolver runs **before** Spring's built-ins but still allows local handlers to take priority.

```
    @Override
    public int getOrder() {
        return Ordered.HIGHEST_PRECEDENCE + 1;
    }
```

```
   RequestContextDTO contextDTO = (RequestContextDTO) request.getAttribute("context");
        //Verifies contextDTO populated and no outcome set
        if (contextDTO != null && contextDTO.getOutcome() == null) {
            int status = mapExceptionToStatus(ex);
            contextDTO.setOutcome("[REJECTED] status: " + status + ", " + ex.getMessage());
        }

        // Return null so that other resolvers (DefaultHandlerExceptionResolver, etc.)
        // can still apply their normal logic
        return null;
    }

```

## Consequences

- Improves logging and traceability.
- Centralizes framework exception without massive refactoring of code-base.
- Improves accountability by logging every user action (registering IP address and authentication where applicable).
- 
## Alternatives Considered

- **Using centeral `@CntrollerAdvice`**
    - Pros: Centralization of exception handling, improves consistency, avoid collisions and duplicates.
    - Cons: At this time requires massive refactor of existing code.
